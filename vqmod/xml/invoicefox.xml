<modification>
	<id>InvoiceFox module</id>
	<version>0.0.1</version>
	<vqmver>2.2.1</vqmver>
	<author>Refaktor Labs, Janko Metelko</author>
        <file name="admin/view/template/common/footer.tpl" error="skip">
		<operation error="skip">
			<search position="replace"><![CDATA[
                            <?php echo $text_footer; ?>
				]]>
			</search>
			<add trim="true"><![CDATA[
			<?php echo $text_footer; ?> - <a href="">InvoiceFox Mod</a>
			]]>
			</add>
		</operation>
	</file>
	<file name="admin/controller/sale/order.php" error="skip"> <!-- LOOKS LIKE ORDER STATUS CHANGE HOOK HERE - JM JANKO -->
	  <operation error="skip">
	    <search position="before"><![CDATA[
	    $this->model_sale_order->addOrderHistory($this->request->get['order_id'], $this->request->post);
	    ]]>
	    </search>
			<add trim="false"><![CDATA[                          
                                    if(file_exists("model/invoicefox/hooks.php"))
                                    {                          
                                        require_once("model/invoicefox/hooks.php");
                                        $hooks = new ModelInvoiceFoxHooks( $this->registry );
                                        $this->request->post["comment"] = $hooks->changeOrderStatusHook($this->request->post["order_status_id"], $this->request->post["comment"], $this->request->get["order_id"]);
                                    }
				]]>
			</add>
		</operation>
        </file>   
	<!--file name="admin/model/sale/order.php" error="skip">
	  <operation error="skip">
	    <search position="after"><![CDATA[
	    public function editOrder($order_id, $data) {
	    ]]>
	    </search>
	                 <add trim="false"><![CDATA[                          
			            if(file_exists("model/invoicefox/hooks.php"))
                                    {                          
                                        require_once("model/invoicefox/hooks.php");
                                        $hooks = new ModelInvoiceFoxHooks( $this->registry );
                                        $data["comment"] = $hooks->changeOrderStatusHook($data["order_status_id"], $data["comment"], $order_id);
                                    }
				    ]]>
			</add>
		</operation>
        </file-->
        <!--file name="admin/controller/catalog/product.php" error="skip">
		<operation error="skip">
			<search position="before"><![CDATA[
                                $this->model_catalog_product->deleteProduct($product_id);
				]]>
			</search>
			<add trim="true"><![CDATA[                          
                        if(file_exists("model/invoicefox/hooks.php"))
                        {                          
                            require_once("model/invoicefox/hooks.php");
                            $hooks = new ModelInvoiceFoxHooks( $this->registry );
                            require_once($hooks->getLanguageDirectory());
                            $hooks->productDeleteHook($product_id);
                        }
				]]>
			</add>
		</operation>
	</file-->
</modification>
        
